{% load static %}

<aside class="main-sidebar sidebar-dark-primary elevation-4">

{% if request.user.user_type == '1' %}
    <!-- Brand Logo -->
    <a href="{% url 'admin_home' %}" class="brand-link">
        <img src="{% static 'dist/img/AdminLTELogo.png' %}" alt="AdminLTE Logo"
             class="brand-image img-circle elevation-3">
        <span class="brand-text font-weight-light">Admin Panel</span>
    </a>

    <div class="sidebar">
        <!-- User Panel -->
        <div class="user-panel mt-3 pb-3 mb-3 d-flex">
            <div class="image">
                <img src="{{ request.user.profile_pic }}" class="img-circle elevation-2" alt="User Image">
            </div>
            <div class="info">
                <a href="#" class="d-block">{{ user }}</a>
            </div>
        </div>

        <!-- Menu -->
        <nav class="mt-2">
            <ul class="nav nav-pills nav-sidebar flex-column">

                <li class="nav-item">
                    {% url 'admin_home' as admin_home %}
                    <a href="{{ admin_home }}" class="nav-link {% if admin_home == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-tachometer-alt"></i> Home
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'admin_view_profile' as admin_view_profile %}
                    <a href="{{ admin_view_profile }}" class="nav-link {% if admin_view_profile == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-user-cog"></i> View/Edit Profile
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'admin_notify_staff' as admin_notify_staff %}
                    <a href="{{ admin_notify_staff }}" class="nav-link {% if admin_notify_staff == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-bell"></i> Notify Staff
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'admin_notify_student' as admin_notify_student %}
                    <a href="{{ admin_notify_student }}" class="nav-link {% if admin_notify_student == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-bullhorn"></i> Notify Student
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'add_staff' as add_staff %}
                    <a href="{{ add_staff }}" class="nav-link {% if add_staff == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-user-plus"></i> Add Staff
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'manage_staff' as manage_staff %}
                    {% url 'edit_staff' staff_id as edit_staff %}
                    <a href="{{ manage_staff }}" class="nav-link {% if manage_staff == request.path or request.path == edit_staff %}active{% endif %}">
                        <i class="nav-icon fas fa-users-cog"></i> Manage Staff
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'add_student' as add_student %}
                    <a href="{{ add_student }}" class="nav-link {% if add_student == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-user-graduate"></i> Add Student
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'manage_student' as manage_student %}
                    {% url 'edit_student' student_id as edit_student %}
                    <a href="{{ manage_student }}" class="nav-link {% if manage_student == request.path or request.path == edit_student %}active{% endif %}">
                        <i class="nav-icon fas fa-users"></i> Manage Student
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'add_course' as add_course %}
                    <a href="{{ add_course }}" class="nav-link {% if add_course == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-book"></i> Add Course
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'manage_course' as manage_course %}
                    {% url 'edit_course' course_id as edit_course %}
                    <a href="{{ manage_course }}" class="nav-link {% if manage_course == request.path or request.path == edit_course %}active{% endif %}">
                        <i class="nav-icon fas fa-book-open"></i> Manage Course
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'add_subject' as add_subject %}
                    <a href="{{ add_subject }}" class="nav-link {% if add_subject == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-folder-plus"></i> Add Subject
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'manage_subject' as manage_subject %}
                    {% url 'edit_subject' subject_id as edit_subject %}
                    <a href="{{ manage_subject }}" class="nav-link {% if manage_subject == request.path or request.path == edit_subject %}active{% endif %}">
                        <i class="nav-icon fas fa-folder-open"></i> Manage Subject
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'add_session' as add_session %}
                    <a href="{{ add_session }}" class="nav-link {% if add_session == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-calendar-plus"></i> Add Session
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'manage_session' as manage_session %}
                    {% url 'edit_session' session_id as edit_session %}
                    <a href="{{ manage_session }}" class="nav-link {% if manage_session == request.path or request.path == edit_session %}active{% endif %}">
                        <i class="nav-icon fas fa-calendar-alt"></i> Manage Session
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'admin_view_attendance' as admin_view_attendance %}
                    <a href="{{ admin_view_attendance }}" class="nav-link {% if admin_view_attendance == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-clipboard-list"></i> View Attendance
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'student_feedback_message' as student_feedback_message %}
                    <a href="{{ student_feedback_message }}" class="nav-link {% if student_feedback_message == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-comment-dots"></i> Student Feedback
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'staff_feedback_message' as staff_feedback_message %}
                    <a href="{{ staff_feedback_message }}" class="nav-link {% if staff_feedback_message == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-comments"></i> Staff Feedback
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'view_staff_leave' as view_staff_leave %}
                    <a href="{{ view_staff_leave }}" class="nav-link {% if view_staff_leave == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-plane-departure"></i> Staff Leave
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'view_student_leave' as view_student_leave %}
                    <a href="{{ view_student_leave }}" class="nav-link {% if view_student_leave == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-plane"></i> Student Leave
                    </a>
                </li>
            </ul>
        </nav>
    </div>

{% elif request.user.user_type == '2' %}
    <!-- Staff Panel -->
    <a href="#" class="brand-link">
        <img src="{% static 'dist/img/AdminLTELogo.png' %}" alt="Logo" class="brand-image img-circle elevation-3">
        <span class="brand-text font-weight-light">Staff Panel</span>
    </a>
    <div class="sidebar">
        <div class="user-panel mt-3 pb-3 mb-3 d-flex">
            <div class="image">
                <img src="{{ request.user.profile_pic }}" class="img-circle elevation-2" alt="User Image">
            </div>
            <div class="info">
                <a href="#" class="d-block">{{ user }}</a>
            </div>
        </div>
        <nav class="mt-2">
            <ul class="nav nav-pills nav-sidebar flex-column">
                <li class="nav-item">
                    {% url 'staff_home' as staff_home %}
                    <a href="{{ staff_home }}" class="nav-link {% if staff_home == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-home"></i> Home
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'staff_view_profile' as staff_view_profile %}
                    <a href="{{ staff_view_profile }}" class="nav-link {% if staff_view_profile == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-user-cog"></i> View/Edit Profile
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'staff_add_result' as staff_add_result %}
                    <a href="{{ staff_add_result }}" class="nav-link {% if staff_add_result == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-plus-circle"></i> Add Result
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'edit_student_result' as edit_student_result %}
                    <a href="{{ edit_student_result }}" class="nav-link {% if edit_student_result == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-edit"></i> Edit Result
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'staff_take_attendance' as staff_take_attendance %}
                    <a href="{{ staff_take_attendance }}" class="nav-link {% if staff_take_attendance == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-check-square"></i> Take Attendance
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'staff_update_attendance' as staff_update_attendance %}
                    <a href="{{ staff_update_attendance }}" class="nav-link {% if staff_update_attendance == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-sync"></i> View/Update Attendance
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'staff_view_notification' as staff_view_notification %}
                    <a href="{{ staff_view_notification }}" class="nav-link {% if staff_view_notification == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-bell"></i> View Notifications
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'staff_apply_leave' as staff_apply_leave %}
                    <a href="{{ staff_apply_leave }}" class="nav-link {% if staff_apply_leave == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-plane-departure"></i> Apply For Leave
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'staff_feedback' as staff_feedback %}
                    <a href="{{ staff_feedback }}" class="nav-link {% if staff_feedback == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-comment-dots"></i> Feedback
                    </a>
                </li>
            </ul>
        </nav>
    </div>

{% else %}
    <!-- Student Panel -->
    <a href="#" class="brand-link">
        <img src="{% static 'dist/img/AdminLTELogo.png' %}" alt="Logo" class="brand-image img-circle elevation-3">
        <span class="brand-text font-weight-light">Student Panel</span>
    </a>
    <div class="sidebar">
        <div class="user-panel mt-3 pb-3 mb-3 d-flex">
            <div class="image">
                <img src="{{ request.user.profile_pic }}" class="img-circle elevation-2" alt="User Image">
            </div>
            <div class="info">
                <a href="#" class="d-block">{{ user }}</a>
            </div>
        </div>
        <nav class="mt-2">
            <ul class="nav nav-pills nav-sidebar flex-column">
                <li class="nav-item">
                    {% url 'student_home' as student_home %}
                    <a href="{{ student_home }}" class="nav-link {% if student_home == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-home"></i> Home
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'student_view_profile' as student_view_profile %}
                    <a href="{{ student_view_profile }}" class="nav-link {% if student_view_profile == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-user-cog"></i> View/Edit Profile
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'student_view_result' as student_view_result %}
                    <a href="{{ student_view_result }}" class="nav-link {% if student_view_result == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-poll"></i> View Results
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'student_view_attendance' as student_view_attendance %}
                    <a href="{{ student_view_attendance }}" class="nav-link {% if student_view_attendance == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-clipboard-list"></i> View Attendance
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'student_view_notification' as student_view_notification %}
                    <a href="{{ student_view_notification }}" class="nav-link {% if student_view_notification == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-bell"></i> View Notifications
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'student_apply_leave' as student_apply_leave %}
                    <a href="{{ student_apply_leave }}" class="nav-link {% if student_apply_leave == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-plane-departure"></i> Apply For Leave
                    </a>
                </li>
                <li class="nav-item">
                    {% url 'student_feedback' as student_feedback %}
                    <a href="{{ student_feedback }}" class="nav-link {% if student_feedback == request.path %}active{% endif %}">
                        <i class="nav-icon fas fa-comment-dots"></i> Feedback
                    </a>
                </li>
            </ul>
        </nav>
    </div>
{% endif %}

<!-- Logout -->
<nav>
    <ul class="nav nav-pills nav-sidebar flex-column">
        <li class="nav-item">
            <a href="{% url 'user_logout' %}" onclick="return confirm('Your session would be terminated.\n\nProceed?')" class="nav-link text-danger">
                <i class="nav-icon fas fa-sign-out-alt"></i> Logout
            </a>
        </li>
    </ul>
</nav>

</aside>
